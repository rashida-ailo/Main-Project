{% extends 'accounts/base_admin.html' %}

{% block content %}
<h2>
    Appointments – {{ patient.user.first_name }} {{ patient.user.last_name }}
</h2>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Doctor</th>
            <th>Specialization</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
            <th>Reason</th>
        </tr>
    </thead>

    <tbody>
        {% for appointment in appointments %}
        <tr>
            <td>
                Dr. {{ appointment.doctor.user.first_name }}
            </td>
            <td>
                {{ appointment.doctor.get_specialization_display }}
            </td>
            <td>{{ appointment.appointment_date }}</td>
            <td>{{ appointment.appointment_time }}</td>
            <td>
                <span class="badge 
                    {% if appointment.status == 'completed' %}bg-success
                    {% elif appointment.status == 'cancelled' %}bg-danger
                    {% elif appointment.status == 'confirmed' %}bg-primary
                    {% else %}bg-secondary{% endif %}
                ">
                    {{ appointment.get_status_display }}
                </span>
            </td>
            <td>{{ appointment.reason|default:"—" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center">
                No appointments found
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'admin_manage_patients' %}"
   class="btn btn-secondary">
    Back to Patients
</a>

{% endblock %}
